# Светомузыка с управлением через WiFi
## Описание проекта
### 5 эффектов
- Резкая смена цвета
- Столбик громкости
- Бегущие огни
- Градиент
- Цвет

У эффекта _Столбик громкости_ и _Градиент_ есть 8 палитр
- Тепло
- Лава
- Вечеринка
- Радуга
- Павлин
- Облака
- Океан
- Лес

### Управление происходит через веб-страницу
Веб-интерфейс позволяет переключать и настраивать режимы, настраивать автосмену режимов, вводить количество светодиодов, устанавливать лимит по току, изменять яркость и выключать светомузыку. 

![WEBPAGE](https://github.com/alerew/ColorMusic/blob/main/webpage/webpage.jpg)

## Состав
- Wemos D1 mini
- Адресная светодиодная лента WS2812b
- Микрофон MAX9814
- Сенсорная кнопка TTP223
- Диод 1N4007
- Резистор 220 Ом
## Схема
![SCHEME](https://github.com/alerew/ColorMusic/blob/main/schemes/scheme.png)
## Подключение
- При подаче питания начнётся подключение к роутеру (лента мигает синим)
  - Если подключение не будет установлено за 30 секунд, то ESP8266 создаст свою точку доступа (лента мигает красным)
  - Точка доступа называется __Color Music__, пароль __12345678__
  - При подключении к точке доступа перейди в браузере по адресу __192.168.4.1__
  - Для насторойки WiFi перейди на вкладку __WiFi__, введи SSID и пароль от своей сети
- При успешном подключении светомузыка перейдёт в режим работы
- Страница с настройками (веб-страница) доступна в локальной сети роутера по IP адресу, который выдал роутер. Чтобы его узнать, надо подключить Wemos к комьпютеру и открыть монитор порта
## Управление через кнопку
- 1 клик: включить/выключить
- 2 клика: следующий режим
- 3 клика: предыдущий режим
- Удержание: изменить яркость
## Настройки в коде
    // ------------ НАСТОРЙКИ ------------
    #define USE_BTN 1         // 1 использовать кнопку, 0 нет
    #define BTN_PIN 4         // кнопка на D2
    #define STRIP_PIN 2       // D4 пин подключения ленты
    #define MAX_LEDS 300      // максимальное количество светодиодов
    #define MAX_PRESETS 20    // максимальное количество режимов
## Используемые библиотеки
- [FastLED](https://github.com/FastLED/FastLED)
- [VolAnalyzer](https://github.com/GyverLibs/VolAnalyzer)
- [GyverPortal](https://github.com/GyverLibs/GyverPortal)
